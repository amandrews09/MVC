{{!-- Extends the main layout --}}
{{#extend 'main'}}
  {{!-- Sets the title for this view --}}
  {{#content 'title'}}{{post.title}}{{/content}}

  {{!-- Main content --}}
  <h1>{{post.title}}</h1>
  <p>{{post.content}}</p>
  <p>Posted by {{post.user.username}} on {{format_date post.createdAt}}</p>

  <h2>Comments</h2>
  {{#if post.comments.length}}
    {{#each post.comments}}
      <div>
        <p>{{this.comment_text}}</p>
        <p>Commented by {{this.user.username}} on {{format_date this.createdAt}}</p>
      </div>
    {{/each}}
  {{else}}
    <p>No comments yet.</p>
  {{/if}}

  {{#if logged_in}}
    <h3>Add a Comment</h3>
    <form id="comment-form">
      <textarea id="comment_text" name="comment_text" rows="4" required></textarea>
      <button type="submit">Submit</button>
    </form>
  {{else}}
    <p><a href="/login">Login</a> to add a comment.</p>
  {{/if}}

  <script src="/js/post.js"></script>
{{/extend}}
